<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Devocional DiÃ¡rio â€¢ Um Dedo de FÃ©</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y2EVBCDMYE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y2EVBCDMYE');
</script>
  <style>
    :root {
      --marrom-escuro: #4b2a1a;
      --marrom-claro: #7b4c27;
      --dourado: #e1a640;
      --bege-fundo: #efe2c3;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--bege-fundo);
      color: var(--marrom-escuro);
      margin: 0;
      padding: 0;
      line-height: 1.8;
    }

    header {
      background-color: var(--bege-fundo);
      text-align: center;
      padding: 20px 0 10px;
      border-bottom: 2px solid var(--dourado);
    }

    .banner-container {
      text-align: center;
      margin: 0 auto;
    }

    #banner-promocional {
      width: 100%;
      max-width: 700px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      transition: transform 0.2s ease;
    }

    #banner-promocional:hover {
      transform: scale(1.02);
    }

    /* BOTÃƒO OUVIR */
    #btn-ouvir {
      display: block;
      margin: 20px auto;
      padding: 12px 25px;
      font-size: 1.05em;
      background-color: var(--dourado);
      color: var(--marrom-escuro);
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.2s ease;
    }

    #btn-ouvir:hover {
      background-color: #d49b2f;
    }

    main {
      max-width: 800px;
      margin: 0 auto 20px auto;
      background: #fff8ef;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 12px rgba(0,0,0,0.05);
    }

    h1 {
      color: var(--marrom-escuro);
      font-size: 1.9em;
      margin-bottom: 10px;
      text-align: center;
    }

    .verse {
      font-weight: 600;
      color: var(--marrom-claro);
      text-align: center;
      margin-bottom: 20px;
    }

    .content p {
      margin-bottom: 20px;
      font-size: 1.05em;
      text-align: justify;
      hyphens: auto;
      -webkit-hyphens: auto;
      -ms-hyphens: auto;
      text-indent: 1.2em;
    }

    .content p strong {
      color: var(--dourado);
    }

    .content p em {
      color: var(--marrom-claro);
      font-style: italic;
    }

    .reflection, .practical, .prayer {
      border-left: 4px solid var(--dourado);
      padding-left: 16px;
      margin: 30px 0;
      background: #fff3e0;
    }

    .prayer {
      background: #fef5e4;
      border: 1px solid #f1c27d;
      padding: 16px;
      border-radius: 10px;
      margin-top: 25px;
      text-align: center;
      hyphens: auto;
      -webkit-hyphens: auto;
      -ms-hyphens: auto;
    }

    .aplicacoes-formatadas {
      background-color: #fef5e4;
      border: 1px solid #f1c27d;
      border-radius: 10px;
      padding: 16px;
      margin-top: 25px;
      text-align: justify;
      hyphens: auto;
      border-left: none;
    }

    .aplicacoes-formatadas h3 {
      text-align: center;
      margin-bottom: 12px;
    }

    footer {
      text-align: center;
      font-size: 0.9em;
      padding: 30px 0;
      color: var(--marrom-claro);
    }

    footer a {
      color: var(--dourado);
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* ðŸ”„ BotÃ£o Reiniciar Jornada */
    #btn-resetar {
      display: block;
      margin: 10px auto 0 auto;
      padding: 10px 20px;
      background: #d49b2f;
      border: none;
      border-radius: 10px;
      color: #4b2a1a;
      font-weight: 600;
      cursor: pointer;
      font-size: 1em;
      transition: background 0.2s;
    }

    #btn-resetar:hover {
      background: #c18a28;
    }

    @media (max-width: 768px) {
      #banner-promocional {
        max-width: 95%;
        border-radius: 10px;
      }

      main {
        margin: 10px 5px 0 5px;
        padding: 15px;
      }

      h1.titulo-devocional {
        font-size: 1.6em;
        line-height: 1.2;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="banner-container">
      <a href="https://wa.me/5527999080664?text=Quero%20a%20Caneca%20Devocional%20com%2020%25%20de%20desconto.%2E" target="_blank" rel="noopener noreferrer">
        <img id="banner-promocional" src="imagens/banner-promocional.jpg" alt="Banner promocional da caneca devocional">
      </a>
    </div>
  </header>

  <!-- BotÃ£o tocar Ã¡udio -->
  <button id="btn-ouvir">ðŸŽ§ Ouvir devocional</button>

  <main id="devocional">
    <p style="text-align:center;">Carregando devocional...</p>
  </main>

  <footer>
    <button id="btn-resetar" onclick="reiniciarJornada()">ðŸ”„ Reiniciar Jornada</button>

    <p>Â© 2025 <strong>Um Dedo de FÃ©</strong> â€” por 
      <a href="https://www.instagram.com/prwevertonquintino/" target="_blank">@prwevertonquintino</a>
    </p>
  </footer>

  <script>
    const totalDevocionais = 365;

    let dataInicio = localStorage.getItem("dataInicioDevocional");
    if (!dataInicio) {
      dataInicio = new Date().toISOString();
      localStorage.setItem("dataInicioDevocional", dataInicio);
    }

    let numeroDevocional = localStorage.getItem("numeroDevocional");

    if (!numeroDevocional) {
      numeroDevocional = 1;
      localStorage.setItem("numeroDevocional", numeroDevocional);
      localStorage.setItem("ultimaDataAcesso", new Date().toDateString());
    } else {
      const ultimaData = localStorage.getItem("ultimaDataAcesso");
      const hojeStr = new Date().toDateString();

      if (ultimaData !== hojeStr) {
        numeroDevocional = parseInt(numeroDevocional) + 1;
        localStorage.setItem("numeroDevocional", numeroDevocional);
        localStorage.setItem("ultimaDataAcesso", hojeStr);
      }
    }

    if (numeroDevocional > totalDevocionais) {
      window.location.href = "final.html";
    } else {
      const caminho = `devocionais/devocional-${numeroDevocional}.html`;
      fetch(caminho)
        .then(r => {
          if (!r.ok) throw new Error("Devocional nÃ£o encontrado");
          return r.text();
        })
        .then(html => {
          document.getElementById("devocional").innerHTML = html;

          const agora = new Date();
          const dia = String(agora.getDate()).padStart(2, '0');
          const mes = String(agora.getMonth() + 1).padStart(2, '0');
          const ano = agora.getFullYear();
          const dataHojeFormatada = `${dia}/${mes}/${ano}`;

          const pDate = document.querySelector("#devocional p.date");
          if (pDate) pDate.textContent = dataHojeFormatada;
        })
        .catch(err => {
          document.getElementById("devocional").innerHTML =
            "<p style='text-align:center;'>Ops! O devocional deste dia ainda nÃ£o estÃ¡ disponÃ­vel.</p>";
        });
    }

    /* ðŸ”Š Controle de Ã¡udio com play/pause */
let audio = null;

function tocarAudio() {
  const audioPath = `audios/devocional-${numeroDevocional}.mp3`;

  // Criar Ã¡udio apenas uma vez
  if (!audio) {
    audio = new Audio(audioPath);

    audio.onerror = () => {
      alert("Ãudio deste devocional ainda nÃ£o foi enviado.");
    };
  }

  // Se estiver tocando â†’ pausa
  if (!audio.paused) {
    audio.pause();
    return;
  }

  // Se estiver pausado â†’ toca
  audio.play().catch(() => {
    alert("NÃ£o foi possÃ­vel tocar o Ã¡udio.");
  });
}

document.getElementById("btn-ouvir").addEventListener("click", tocarAudio);

    /* ðŸ”„ FunÃ§Ã£o Reiniciar Jornada */
    function reiniciarJornada() {
      localStorage.removeItem("dataInicioDevocional");
      localStorage.removeItem("numeroDevocional");
      localStorage.removeItem("ultimaDataAcesso");

      alert("Jornada reiniciada! Voltando ao primeiro devocional...");
      location.reload();
    }

    /* Formatar aplicaÃ§Ãµes prÃ¡ticas */
    function formatarAplicacoesPraticas() {
      const bloco = document.querySelector(".practical p");
      if (!bloco) return;

      const texto = bloco.innerText;
      const tituloMatch = texto.match(/^.*?:/);
      const titulo = tituloMatch ? tituloMatch[0].replace(":", "") : "AplicaÃ§Ãµes prÃ¡ticas";

      const itens = texto
        .split(/\d+\)/)
        .map(t => t.trim())
        .filter(t => t && !t.startsWith("AplicaÃ§Ãµes prÃ¡ticas"));

      if (itens.length > 0) {
        const novaEstrutura = document.createElement("div");
        novaEstrutura.classList.add("aplicacoes-formatadas");
        novaEstrutura.innerHTML = `
          <h3 style="text-align:center; margin-bottom:10px;">${titulo}</h3>
          <ol style="text-align:justify; hyphens:auto; line-height:1.6;">
            ${itens.map(t => `<li>${t}</li>`).join("")}
          </ol>
        `;
        bloco.parentElement.replaceWith(novaEstrutura);
      }
    }

    setTimeout(formatarAplicacoesPraticas, 400);
  </script>

</body>
</html>
